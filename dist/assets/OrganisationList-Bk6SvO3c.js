import{r as a,n as V,j as e,C as _}from"./index-DxiAcUCP.js";import{C as j}from"./index.esm-Cy3LKcd6.js";import{C as R,a as B}from"./CCardBody-CGlVQwBB.js";import{C as U}from"./CCardTitle-gVDurk02.js";import{C as G}from"./CAlert-7UTiU2fV.js";import{b as d}from"./CContainer-HlgF_dlK.js";import{c as $,a as Z}from"./cil-search-BgoJf-gK.js";import{C as z}from"./CForm-DJgMOtbZ.js";import{C as J,a as q}from"./CInputGroupText-COP0V_2c.js";import{C as n}from"./CFormInput-BveaeGyj.js";import{C as Q,a as W,b as T,c as o,d as X,e as c}from"./CTable-da_EwEXq.js";import{C as Y,a as y}from"./CPaginationItem-BIOq8jc5.js";import{C as ee,a as se}from"./CModalBody-DgXVUmU_.js";import{C as re}from"./CModalHeader-DOamcui6.js";import{C as te}from"./CModalTitle-D3dW3WEl.js";import{a as m}from"./CFormControlWrapper-BYq7y8h4.js";import"./CCloseButton-BkFP51Rh.js";import"./DefaultLayout-BmgnOIWU.js";var ae=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M410.168,133.046,381.21,104.088,464.017,104l-.034-32L328,72.144V208h32V128.132l27.541,27.541A152.5,152.5,0,0,1,279.972,416l.056,32a184.5,184.5,0,0,0,130.14-314.954Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M232.028,104l-.056-32a184.5,184.5,0,0,0-130.14,314.954L130.878,416H48v32H184V312H152v79.868l-27.541-27.541A152.5,152.5,0,0,1,232.028,104Z' class='ci-primary'/>"];function Ie(){const[p,k]=a.useState([]),[x,u]=a.useState(!1),[H,v]=a.useState(!1),[r,l]=a.useState({}),[b,E]=a.useState(!1),[f,C]=a.useState(!1),[M,I]=a.useState([]),[A,L]=a.useState(""),[i,g]=a.useState(1),h=10,w=i*h,S=w-h,F=M.slice(S,w),D=s=>{const t=s.target.value.toLowerCase();L(t);const O=p.filter(P=>P.org_Name.toLowerCase().includes(t));I(O)},K=V();a.useEffect(()=>{C(!1);try{fetch("https://wazimobile-sms-backend.onrender.com/get_organisation").then(s=>s.json()).then(s=>{console.log(s),k(s),I(s),C(!0)}).catch(s=>{console.log(s),C(!0)})}catch(s){console.error("There was a problem with the fetch operation:",s)}},[b]);const N=async s=>{s.preventDefault(),v(!0);try{const t=await fetch(`https://wazimobile-sms-backend.onrender.com/update-organisation/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_Name:r.org_Name,smsCost:r.smsCost,accessKey:r.accessKey,apiKey:r.apiKey,groupID:r.groupID,clientId:r.clientId})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);E(!b)}catch(t){console.error("There was a problem with the fetch operation:",t)}v(!1),u(!x)};return a.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(R,{style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)",marginBottom:"30px",backgroundColor:"rgba(255,255,255,0.7)"},children:e.jsxs(B,{children:[e.jsx(U,{style:{fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs(G,{color:"primary",variant:"solid",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsxs("svg",{style:{marginRight:"8px"},xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"currentColor",class:"bi bi-buildings",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M14.763.075A.5.5 0 0 1 15 .5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .342-.474L6 7.64V4.5a.5.5 0 0 1 .276-.447l8-4a.5.5 0 0 1 .487.022M6 8.694 1 10.36V15h5zM7 15h2v-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5V15h2V1.309l-7 3.5z"}),e.jsx("path",{d:"M2 11h1v1H2zm2 0h1v1H4zm-2 2h1v1H2zm2 0h1v1H4zm4-4h1v1H8zm2 0h1v1h-1zm-2 2h1v1H8zm2 0h1v1h-1zm2-2h1v1h-1zm0 2h1v1h-1zM8 7h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zM8 5h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zm0-2h1v1h-1z"})]}),"Organisations"]}),e.jsxs(d,{variant:"outline",color:"light",onClick:()=>K("/organistion-registeration"),children:[e.jsx(j,{icon:$,style:{marginRight:"5px"}}),"Register New Organisation"]})]})}),f&&f?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mb-3",children:e.jsxs(J,{className:"mb-3",style:{width:"60%",margin:"0 auto"},children:[e.jsx(q,{id:"basic-addon1",color:"dark",style:{color:"#fff",backgroundColor:"rgb(71, 71, 212)"},children:e.jsx(j,{icon:Z})}),e.jsx(n,{type:"text",id:"searchInput",placeholder:"Search by Organisation Name",value:A,onChange:D,style:{borderColor:"rgb(71, 71, 212)"}})]})}),e.jsxs(Q,{responsive:!0,small:!0,hover:!0,borderless:!0,stripedColumns:!0,children:[e.jsx(W,{children:e.jsxs(T,{color:"dark",style:{textAlign:"center"},children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Organisation Code"}),e.jsx(o,{scope:"col",children:"Organisation Name"}),e.jsx(o,{scope:"col",children:"Sender Id"}),e.jsx(o,{scope:"col",children:"Sms Cost"}),e.jsx(o,{scope:"col",children:"Group Id"}),e.jsx(o,{scope:"col",children:"Action"})]})}),F&&F.map((s,t)=>e.jsx(X,{children:e.jsxs(T,{style:{textAlign:"center"},color:t%2?"primary":"",children:[e.jsx(o,{scope:"row",children:S+t+1}),e.jsx(c,{children:s.org_Code}),e.jsx(c,{children:s.org_Name}),e.jsx(c,{children:s.url}),e.jsx(c,{children:s.smsCost}),e.jsx(c,{children:s.groupID}),e.jsx(c,{children:e.jsxs(d,{color:"dark",variant:"outline",onClick:()=>{u(!x),l(s)},style:{display:"flex",alignItems:"center",margin:"2px auto"},children:[e.jsx(j,{icon:ae,style:{marginRight:"5px"}})," Update"]})})]})},s.id))]}),e.jsxs(Y,{"aria-label":"Page navigation example",children:[e.jsx(y,{onClick:()=>g(i-1),disabled:i===1,children:"Previous"}),[...Array(Math.ceil(p.length/h))].map((s,t)=>e.jsx(y,{active:t+1===i,onClick:()=>g(t+1),children:t+1},t+1)),e.jsx(y,{onClick:()=>g(i+1),disabled:i===Math.ceil(p.length/h),children:"Next"})]})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"end",color:"black",width:"100%",marginTop:"30px"},children:[e.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"}),e.jsx("h3",{style:{marginLeft:"20px"},children:"Loading"})]})]})}),e.jsxs(ee,{backdrop:"static",visible:x,onClose:()=>u(!1),"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(re,{children:e.jsx(te,{id:"StaticBackdropExampleLabel",children:"Update"})}),e.jsx(se,{children:e.jsxs(z,{onSubmit:N,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Organisation Name"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Organisation Name",onChange:s=>l({...r,org_Name:s.target.value}),value:r.org_Name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Sms Cost"}),e.jsx(n,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter The Sms Cost",onChange:s=>l({...r,smsCost:s.target.value}),value:r.smsCost})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Access Key"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Access Key",onChange:s=>l({...r,accessKey:s.target.value}),value:r.accessKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Api Key"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Api Key",onChange:s=>l({...r,apiKey:s.target.value}),value:r.apiKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Group Id"}),e.jsx(n,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter Group Id",onChange:s=>l({...r,groupID:s.target.value}),value:r.groupID})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Client Id"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Client Id",onChange:s=>l({...r,clientId:s.target.value}),value:r.clientId})]}),e.jsx("div",{className:"col-auto",style:{width:"100%"},children:H?e.jsxs(d,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%"},children:[e.jsx(_,{as:"span",size:"sm"})," Updating information ..."]}):e.jsx(d,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%"},children:"UPDATE"})})]})})]})]})}export{Ie as default};
