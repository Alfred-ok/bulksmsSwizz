import{r as a,n as _,j as e,C as R}from"./index-C301rl4l.js";import{C as j}from"./index.esm-DfaUp9eW.js";import{C as B,a as U}from"./CCardBody-BB8X-jUM.js";import{C as V,g as G,i as $,h as J}from"./DefaultLayout-D85aDnQc.js";import{C as q}from"./CAlert-DXt3K87V.js";import{d as m,c}from"./CRow-DzvM-Fku.js";import{c as Q,a as W}from"./cil-search-BgoJf-gK.js";import{C as z}from"./CForm-DyX8Mp35.js";import{C as X,a as Y}from"./CInputGroupText-BfLlLb0E.js";import{C as n}from"./CFormInput-VSLTUyno.js";import{C as Z,a as ee,b as T,c as o,d as se,e as h}from"./CTable-BgNGgvOw.js";import{c as te}from"./cil-sync-DTxDyR9B.js";import{C as re,a as y}from"./CPaginationItem-CfWfORXZ.js";import{C as ae}from"./CModalHeader-DczIfwCg.js";import"./CFormSelect-CWPKjNEb.js";function ve(){const[p,k]=a.useState([]),[x,u]=a.useState(!1),[E,v]=a.useState(!1),[t,l]=a.useState({}),[f,D]=a.useState(!1),[b,g]=a.useState(!1),[H,I]=a.useState([]),[K,M]=a.useState(""),[i,C]=a.useState(1),d=10,w=i*d,S=w-d,F=H.slice(S,w),O=s=>{const r=s.target.value.toLowerCase();M(r);const A=p.filter(L=>L.org_Name.toLowerCase().includes(r));I(A)},P=_();a.useEffect(()=>{g(!1);try{fetch("https://81c9-69-197-145-100.ngrok-free.app/get_organisation").then(s=>s.json()).then(s=>{console.log(s),k(s),I(s),g(!0)}).catch(s=>{console.log(s),g(!0)})}catch(s){console.error("There was a problem with the fetch operation:",s)}},[f]);const N=async s=>{s.preventDefault(),v(!0);try{const r=await fetch(`https://81c9-69-197-145-100.ngrok-free.app/update-organisation/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_Name:t.org_Name,smsCost:t.smsCost,accessKey:t.accessKey,apiKey:t.apiKey,groupID:t.groupID,clientId:t.clientId})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);D(!f)}catch(r){console.error("There was a problem with the fetch operation:",r)}v(!1),u(!x)};return a.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(B,{style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)",marginBottom:"30px",backgroundColor:"rgba(255,255,255,0.7)"},children:e.jsxs(U,{children:[e.jsx(V,{style:{fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs(q,{color:"primary",variant:"solid",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsxs("svg",{style:{marginRight:"8px"},xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"currentColor",class:"bi bi-buildings",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M14.763.075A.5.5 0 0 1 15 .5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .342-.474L6 7.64V4.5a.5.5 0 0 1 .276-.447l8-4a.5.5 0 0 1 .487.022M6 8.694 1 10.36V15h5zM7 15h2v-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5V15h2V1.309l-7 3.5z"}),e.jsx("path",{d:"M2 11h1v1H2zm2 0h1v1H4zm-2 2h1v1H2zm2 0h1v1H4zm4-4h1v1H8zm2 0h1v1h-1zm-2 2h1v1H8zm2 0h1v1h-1zm2-2h1v1h-1zm0 2h1v1h-1zM8 7h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zM8 5h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zm0-2h1v1h-1z"})]}),"Organisations"]}),e.jsxs(m,{variant:"outline",color:"light",onClick:()=>P("/organistion-registeration"),children:[e.jsx(j,{icon:Q,style:{marginRight:"5px"}}),"Register New Organisation"]})]})}),b&&b?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mb-3",children:e.jsxs(X,{className:"mb-3",style:{width:"60%",margin:"0 auto"},children:[e.jsx(Y,{id:"basic-addon1",color:"dark",style:{color:"#fff",backgroundColor:"rgb(71, 71, 212)"},children:e.jsx(j,{icon:W})}),e.jsx(n,{type:"text",id:"searchInput",placeholder:"Search by Organisation Name",value:K,onChange:O,style:{borderColor:"rgb(71, 71, 212)"}})]})}),e.jsxs(Z,{responsive:!0,small:!0,hover:!0,borderless:!0,stripedColumns:!0,children:[e.jsx(ee,{children:e.jsxs(T,{color:"dark",style:{textAlign:"center"},children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Organisation Code"}),e.jsx(o,{scope:"col",children:"Organisation Name"}),e.jsx(o,{scope:"col",children:"Sender Id"}),e.jsx(o,{scope:"col",children:"Sms Cost"}),e.jsx(o,{scope:"col",children:"Group Id"}),e.jsx(o,{scope:"col",children:"Action"})]})}),F&&F.map((s,r)=>e.jsx(se,{children:e.jsxs(T,{style:{textAlign:"center"},color:r%2?"primary":"",children:[e.jsx(o,{scope:"row",children:S+r+1}),e.jsx(h,{children:s.org_Code}),e.jsx(h,{children:s.org_Name}),e.jsx(h,{children:s.url}),e.jsx(h,{children:s.smsCost}),e.jsx(h,{children:s.groupID}),e.jsx(h,{children:e.jsxs(m,{color:"dark",variant:"outline",onClick:()=>{u(!x),l(s)},style:{display:"flex",alignItems:"center",margin:"2px auto"},children:[e.jsx(j,{icon:te,style:{marginRight:"5px"}})," Update"]})})]})},s.id))]}),e.jsxs(re,{"aria-label":"Page navigation example",children:[e.jsx(y,{onClick:()=>C(i-1),disabled:i===1,children:"Previous"}),[...Array(Math.ceil(p.length/d))].map((s,r)=>e.jsx(y,{active:r+1===i,onClick:()=>C(r+1),children:r+1},r+1)),e.jsx(y,{onClick:()=>C(i+1),disabled:i===Math.ceil(p.length/d),children:"Next"})]})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"end",color:"black",width:"100%",marginTop:"30px"},children:[e.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"}),e.jsx("h3",{style:{marginLeft:"20px"},children:"Loading"})]})]})}),e.jsxs(G,{backdrop:"static",visible:x,onClose:()=>u(!1),"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(ae,{children:e.jsx($,{id:"StaticBackdropExampleLabel",children:"Update"})}),e.jsx(J,{children:e.jsxs(z,{onSubmit:N,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Organisation Name"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Organisation Name",onChange:s=>l({...t,org_Name:s.target.value}),value:t.org_Name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Sms Cost"}),e.jsx(n,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter The Sms Cost",onChange:s=>l({...t,smsCost:s.target.value}),value:t.smsCost})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Access Key"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Access Key",onChange:s=>l({...t,accessKey:s.target.value}),value:t.accessKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Api Key"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Api Key",onChange:s=>l({...t,apiKey:s.target.value}),value:t.apiKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Group Id"}),e.jsx(n,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter Group Id",onChange:s=>l({...t,groupID:s.target.value}),value:t.groupID})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"exampleFormControlInput1",children:"Client Id"}),e.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Client Id",onChange:s=>l({...t,clientId:s.target.value}),value:t.clientId})]}),e.jsx("div",{className:"col-auto",style:{width:"100%"},children:E?e.jsxs(m,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%"},children:[e.jsx(R,{as:"span",size:"sm"})," Updating information ..."]}):e.jsx(m,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%"},children:"UPDATE"})})]})})]})]})}export{ve as default};
