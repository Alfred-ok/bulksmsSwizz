import{r as t,e as S,j as o}from"./index-C301rl4l.js";import{C as w}from"./index.esm-DfaUp9eW.js";import{S as c}from"./sweetalert2.esm.all-DOYwHpwi.js";import{a as y,b as v,c as I,d as N}from"./CRow-DzvM-Fku.js";import{C as T,a as F}from"./CCardBody-BB8X-jUM.js";import{C as $,l as k}from"./DefaultLayout-D85aDnQc.js";import{C as D}from"./CAlert-DXt3K87V.js";import{C as E}from"./CForm-DyX8Mp35.js";import{C as d}from"./CFormSelect-CWPKjNEb.js";import{C as G}from"./CFormTextarea-hccMW2jx.js";function q(){t.useRef();const[i,u]=t.useState([]),[p,g]=t.useState([]),m=S.get("groupId");t.useState();const[a,x]=t.useState(),[s,f]=t.useState(),[n,C]=t.useState(),[h,b]=t.useState(),j=async e=>{if(e.preventDefault(),s&&a&&n)try{const r=await fetch("https://81c9-69-197-145-100.ngrok-free.app/group-messagein-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:h,phoneNumber:a,message:n})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.text();console.log(l),c.fire({title:l,text:"Message Sent",icon:"success"}),console.log(l),console.log(a,n)}catch(r){console.error("There was a problem with the fetch operation:",r),c.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:r})}else c.fire({icon:"error",title:"Please Insert Data",text:"Empty input field"})};return t.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/org_group_id/${m}`).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),u(e)}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[]),t.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/groups/get/${m}`).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),g(e)}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[]),t.useEffect(()=>{try{console.log(s),fetch(`https://81c9-69-197-145-100.ngrok-free.app/group-members/getGroup${s}`).then(e=>e.json()).then(e=>{console.log(e),e.map(r=>x(r.phoneNumber))}).catch(e=>{console.log(e)}),console.log(a)}catch(e){console.error("There was a problem with the fetch operation:",e)}},[s]),o.jsx(o.Fragment,{children:o.jsx(y,{className:"justify-content-md-center",children:o.jsx(v,{xs:10,children:o.jsx(T,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:o.jsxs(F,{children:[o.jsx($,{children:o.jsxs(D,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[o.jsx(w,{icon:k,className:"flex-shrink-0 me-2",width:34,height:34}),o.jsx("div",{children:o.jsx("h3",{children:"Group Sms"})})]})}),o.jsxs(E,{onSubmit:j,style:{backgroundColor:"rgba(0,0,0,0.1)",padding:"25px",borderRadius:"5px"},children:[o.jsxs("div",{className:"mb-3",children:[o.jsx(I,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),o.jsxs(d,{id:"exampleFormControlInput1","aria-label":"Default select example",value:h,onChange:e=>b(e.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[o.jsx("option",{value:"",children:"Select Sender Id"})," ",i&&i.map((e,r)=>o.jsx("option",{value:e.org_Code,children:e.url},r))]})]}),o.jsx("div",{className:"mb-3",children:o.jsxs(d,{id:"exampleFormControlInput2","aria-label":"Default select example",value:s,onChange:e=>f(e.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[o.jsx("option",{value:"",children:"Select Group"})," ",p&&p.map((e,r)=>o.jsx("option",{value:e.groupId,children:e.groupName},r))]})}),o.jsx("div",{className:"mb-3",children:o.jsx(G,{id:"exampleFormControlTextarea1",label:"Text Message",rows:3,text:"Must be 8-20 words long.",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:n,onChange:e=>C(e.target.value)})}),o.jsx("div",{className:"col-auto",style:{width:"80%",paddingTop:"20px",margin:"0px auto"},children:o.jsx(N,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%",margin:"0 auto"},children:"Send Sms"})})]})]})})})})})}export{q as default};
