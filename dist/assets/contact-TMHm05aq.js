import{e as x,r,n as N,j as e,C as F}from"./index-C301rl4l.js";import{S as n}from"./sweetalert2.esm.all-DOYwHpwi.js";import{a as d,b as I,c as l,d as h}from"./CRow-DzvM-Fku.js";import{C as z,a as E}from"./CCardBody-BB8X-jUM.js";import{C as G}from"./DefaultLayout-D85aDnQc.js";import{C as T}from"./CForm-DyX8Mp35.js";import{C as M}from"./CFormSelect-CWPKjNEb.js";import{C as u}from"./CFormInput-VSLTUyno.js";import"./index.esm-DfaUp9eW.js";import"./CAlert-DXt3K87V.js";x.get("groupId");function J(){const[i,g]=r.useState(),[C,P]=r.useState(),[v,b]=r.useState(),[f,o]=r.useState(!1);r.useState("");const c=x.get("groupId"),[p,j]=r.useState(),[m,y]=r.useState([]);N(),r.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/groups/get/${c}`).then(a=>(console.log(a),a.json())).then(a=>{console.log(a),y(a)}).catch(a=>{console.log(a)})}catch(a){console.error("There was a problem with the fetch operation:",a)}},[]);const w=async a=>{a.preventDefault(),o(!0);try{const t=await fetch("https://81c9-69-197-145-100.ngrok-free.app/group-members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:i,phoneNumber:v,orgGroupCode:c,groupId:p})});if(!t.ok){const S=await t.json();throw new Error(S)}const s=await t.text();s=="Failed to create Group"?n.fire({title:"Error",text:s,icon:"error"}):n.fire({title:"Successful",text:s,icon:"success"}),o(!1)}catch(t){console.error("There was a problem with the fetch operation:",t),o(!1),n.fire({icon:"error",title:"Validation Error",text:"Please ensure all fields are correctly filled based on the validation rules."})}};return e.jsx(e.Fragment,{children:e.jsx(d,{children:e.jsx(I,{xs:10,style:{margin:"0 auto"},children:e.jsx(z,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:e.jsxs(E,{style:{padding:"35px"},children:[e.jsxs(G,{style:{padding:"20px 20px",display:"flex",alignItems:"center",color:"rgb(71, 71, 212)"},children:[e.jsxs("svg",{style:{marginRight:"8px"},xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"currentColor",class:"bi bi-building-add",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0"}),e.jsx("path",{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1z"}),e.jsx("path",{d:"M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"})]}),e.jsx("h3",{children:"Add Group Contacts"})]}),e.jsxs(T,{onSubmit:w,style:{backgroundColor:"rgba(0,0,0,0.1)",padding:"25px",borderRadius:"5px"},children:[e.jsxs(d,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"exampleFormControlInput1",children:"Group"}),e.jsxs(M,{id:"exampleFormControlInput1","aria-label":"Default select example",value:p,onChange:a=>j(a.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[e.jsx("option",{value:"",children:"Select Group"})," ",m&&m.map((a,t)=>e.jsx("option",{value:a.groupId,children:a.groupName},t))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"exampleFormControlInput1",children:"Contact Name"}),e.jsx(u,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Contact Name",style:{borderColor:"rgba(71, 71, 212,0.6)"},onChange:a=>g(a.target.value),value:i})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"exampleFormControlInput1",children:"Phone Number"}),e.jsx(u,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Phone Number",onChange:a=>b(a.target.value),value:C,style:{borderColor:"rgba(71, 71, 212,0.6)"}})]})]}),e.jsx("div",{className:"col-auto",style:{width:"40%",paddingTop:"20px",margin:"0px auto"},children:f?e.jsxs(h,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%",margin:"0 auto"},children:[e.jsx(F,{as:"span",size:"sm"})," Uploading Data ..."]}):e.jsx(h,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%",margin:"0 auto"},children:"CREATE"})})]})]})})})})})}export{J as default};
