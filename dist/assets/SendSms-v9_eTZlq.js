import{r as l,_ as k,R as v,a as S,c as F,P as b,h as w,j as e}from"./index-DxiAcUCP.js";import{c as I}from"./DefaultLayout-BmgnOIWU.js";import{C as E}from"./index.esm-Cy3LKcd6.js";import{S as g}from"./sweetalert2.esm.all-DOYwHpwi.js";import{C as D,a as P}from"./CRow-BRiTm5IC.js";import{C as L,a as R}from"./CCardBody-CGlVQwBB.js";import{C as M}from"./CCardTitle-gVDurk02.js";import{C as O}from"./CAlert-7UTiU2fV.js";import{C as V}from"./CForm-DJgMOtbZ.js";import{C as y,a as C}from"./CFormControlWrapper-BYq7y8h4.js";import{C as $}from"./CFormSelect-tuFcfyUE.js";import{b as B}from"./CContainer-HlgF_dlK.js";import"./CCloseButton-BkFP51Rh.js";var h=l.forwardRef(function(t,m){var f=t.children,i=t.className,n=t.feedback,o=t.feedbackInvalid,c=t.feedbackValid,s=t.floatingClassName,d=t.floatingLabel,p=t.id,a=t.invalid,r=t.label,x=t.plainText,N=t.text,T=t.tooltipFeedback,u=t.valid,j=k(t,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return v.createElement(y,{describedby:j["aria-describedby"],feedback:n,feedbackInvalid:o,feedbackValid:c,floatingClassName:s,floatingLabel:d,id:p,invalid:a,label:r,text:N,tooltipFeedback:T,valid:u},v.createElement("textarea",S({className:F(x?"form-control-plaintext":"form-control",{"is-invalid":a,"is-valid":u},i),id:p},j,{ref:m}),f))});h.propTypes=S({className:b.string,id:b.string,plainText:b.bool},y.propTypes);h.displayName="CFormTextarea";function _(){const t=w.get("groupId"),[m,f]=l.useState([]),[i,n]=l.useState(),[o,c]=l.useState(),[s,d]=l.useState(),p=async a=>{if(a.preventDefault(),i&&o&&s)try{const r=await fetch("https://wazimobile-sms-backend.onrender.com/messagein",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:i,phoneNumber:o,message:s,msgStatus:"1",sendStatus:"SEND"})});if(n(""),c(""),d(""),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const x=await r.text();g.fire({title:x,text:"Message Sent",icon:"success"}),console.log(x),console.log(o,s)}catch(r){console.error("There was a problem with the fetch operation:",r),g.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:r})}else g.fire({icon:"error",title:"Please Insert Data",text:"Empty input field"});n(""),c(""),d("")};return l.useEffect(()=>{try{fetch(`https://wazimobile-sms-backend.onrender.com/org_group_id/${t}`).then(a=>(console.log(a),a.json())).then(a=>{console.log(a),f(a)}).catch(a=>{console.log(a)})}catch(a){console.error("There was a problem with the fetch operation:",a)}},[]),e.jsx(e.Fragment,{children:e.jsx(D,{className:"justify-content-md-center",children:e.jsx(P,{xs:9,children:e.jsx(L,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:e.jsxs(R,{children:[e.jsx(M,{children:e.jsxs(O,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[e.jsx(E,{icon:I,className:"flex-shrink-0 me-2",width:34,height:34}),e.jsx("div",{children:e.jsx("h3",{children:"Send Sms"})})]})}),e.jsxs(V,{onSubmit:p,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),e.jsxs($,{id:"exampleFormControlInput1","aria-label":"Default select example",value:i,onChange:a=>n(a.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[e.jsx("option",{value:"",children:"Select Sender Id"})," ",m&&m.map((a,r)=>e.jsx("option",{value:a.org_Code,children:a.url},r))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"exampleFormControlTextarea1",children:"Contacts (comma separated)"}),e.jsx(h,{id:"exampleFormControlTextarea1",rows:3,value:o,onChange:a=>c(a.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"exampleFormControlTextarea1",children:"Enter Message"}),e.jsx(h,{id:"exampleFormControlTextarea1",rows:3,value:s,onChange:a=>d(a.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}}),e.jsxs("p",{children:["Characters: 0/1224 ",e.jsx("span",{style:{color:"grey",margin:"0px 10px"},children:"|"})," Pages: 1/8"]})]}),e.jsx("div",{className:"col-auto",children:e.jsx(B,{color:"primary",type:"submit",className:"mb-3",children:"SUBMIT"})})]})]})})})})})}export{_ as default};
