const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ParticlesComponent-DkiwBBEk.js","./index-DxiAcUCP.js","./index-oK6wdU0Y.css"])))=>i.map(i=>d[i]);
import{R as k,e as U,r as n,h as r,n as v,A as K,j as e,C as R}from"./index-DxiAcUCP.js";import{C as g}from"./index.esm-Cy3LKcd6.js";import{a as T,b as l}from"./CContainer-HlgF_dlK.js";import{C as u,a as c}from"./CRow-BRiTm5IC.js";import{C as h,a as I}from"./CCardBody-CGlVQwBB.js";import{C as Q}from"./CAlert-7UTiU2fV.js";import{C as Z}from"./CImage-D-7Qu34e.js";import{C as J}from"./CForm-DJgMOtbZ.js";import{C as x,a as A}from"./CInputGroupText-COP0V_2c.js";import{c as D,a as L}from"./cil-user-Dlmw-Gem.js";import{C}from"./CFormInput-BveaeGyj.js";import"./CCloseButton-BkFP51Rh.js";import"./CFormControlWrapper-BYq7y8h4.js";const P="data:image/png;base64,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",M=k.lazy(()=>U(()=>import("./ParticlesComponent-DkiwBBEk.js"),__vite__mapDeps([0,1,2]),import.meta.url)),ee=()=>{const[p,j]=n.useState(""),[m,f]=n.useState(""),d=r.get("responseMessage"),[y,i]=n.useState(!1),w=v(),{setRole:b,setUsername:N,setAuthToken:S}=n.useContext(K),B=async t=>{t.preventDefault(),i(!0);try{const o="https://wazimobile-sms-backend.onrender.com/";console.log("Base URL:",o);const a=await fetch(`${o}auth/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:m})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);console.log(a);const s=await a.json();console.log(s),i(!1),b(s.role),N(s.user),S({accessToken:s.accessToken,refreshToken:s.refreshToken}),r.set("username",s.user,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),r.set("role",s.role,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),r.set("refreshToken",s.accessToken,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),r.set("responseMessage",s.responseMessage,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),r.set("groupId",s.groupId,{expires:7,secure:!0,sameSite:"Strict",path:"/"})}catch(o){console.error("There was a problem with the fetch operation:",o),i(!1)}w("/dashboard")};return e.jsx(M,{children:e.jsx("div",{children:e.jsx(T,{children:e.jsx(u,{className:"justify-content-center",children:e.jsxs(c,{md:4,children:[e.jsx(h,{variant:"solid",style:{backgroundColor:"transparent",border:"none"},children:e.jsx("h3",{style:{textAlign:"center",color:"#fff",padding:"20px"},children:"WAZI MOBILE"})}),e.jsx(h,{className:"p-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:e.jsxs(I,{children:[d=="Login Failed"?e.jsxs(Q,{color:"danger",style:{textAlign:"center"},children:[e.jsx(Z,{src:P,height:50}),e.jsx("h5",{style:{margin:"4px 0px"},children:d}),e.jsx("p",{style:{margin:"0"},children:"Wrong username or password. Try again"})]}):null,e.jsxs(J,{onSubmit:B,style:{textAlign:"center"},children:[e.jsx("h1",{style:{marginTop:"10px"},children:"Login"}),e.jsx("p",{className:"text-body-secondary",style:{marginTop:"10px"},children:"Sign In to your account"}),e.jsxs(x,{className:"mb-3",style:{marginTop:"20px"},children:[e.jsx(A,{style:{borderColor:"rgb(71, 71, 212)",backgroundColor:"rgb(71, 71, 212)",color:"#fff"},children:e.jsx(g,{icon:D})}),e.jsx(C,{placeholder:"Username",autoComplete:"username",value:p,onChange:t=>j(t.target.value),style:{borderColor:"rgb(71, 71, 212)"},required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(A,{style:{borderColor:"rgb(71, 71, 212)",backgroundColor:"rgb(71, 71, 212)",color:"#fff"},children:e.jsx(g,{icon:L})}),e.jsx(C,{type:"password",placeholder:"Password",autoComplete:"current-password",value:m,onChange:t=>f(t.target.value),required:!0,style:{borderColor:"rgb(71, 71, 212)"}})]}),e.jsxs(u,{children:[e.jsx(c,{xs:12,style:{marginTop:"15px"},children:y?e.jsxs(l,{color:"primary",type:"submit",className:"px-4",disabled:!0,style:{width:"100%"},children:[e.jsx(R,{as:"span",size:"sm"})," authenticating ..."]}):e.jsx(l,{color:"primary",className:"px-4",type:"submit",style:{width:"100%"},children:"Login"})}),e.jsx(c,{xs:12,className:"text-right",style:{marginTop:"15px"},children:e.jsx(l,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})]})})]})})})})})};export{ee as default};
