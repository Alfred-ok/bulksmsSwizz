import{r as a,e as U,n as V,j as e,C as $}from"./index-C301rl4l.js";import{C}from"./index.esm-DfaUp9eW.js";import{C as O,a as _}from"./CCardBody-BB8X-jUM.js";import{C as J,g as q,i as K,h as Q}from"./DefaultLayout-D85aDnQc.js";import{C as W}from"./CAlert-DXt3K87V.js";import{d as c,c as j}from"./CRow-DzvM-Fku.js";import{c as X,a as Y}from"./cil-search-BgoJf-gK.js";import{C as k}from"./CForm-DyX8Mp35.js";import{C as Z,a as ee}from"./CInputGroupText-BfLlLb0E.js";import{C as h}from"./CFormInput-VSLTUyno.js";import{C as se,a as te,b as T,c as d,e as l,d as re}from"./CTable-BgNGgvOw.js";import{c as ae}from"./cil-sync-DTxDyR9B.js";import{C as oe,a as b}from"./CPaginationItem-CfWfORXZ.js";import{C as le}from"./CModalHeader-DczIfwCg.js";import"./CFormSelect-CWPKjNEb.js";function ye(){const[m,F]=a.useState([]),[p,u]=a.useState(!1),[P,f]=a.useState(!1),[r,n]=a.useState({}),[v,H]=a.useState(!1),[y,x]=a.useState(!1),[M,I]=a.useState([]),[L,D]=a.useState(""),[o,g]=a.useState(1),i=10,w=o*i,N=w-i,z=M.slice(N,w),G=U.get("groupId"),A=s=>{const t=s.target.value.toLowerCase();D(t);const E=m.filter(R=>R.names.toLowerCase().includes(t));I(E)},B=V();a.useEffect(()=>{x(!1);try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/group-members/by-org-group-code/${G}`).then(s=>s.json()).then(s=>{console.log(s),F(s),I(s),x(!0)}).catch(s=>{console.log(s),x(!0)})}catch(s){console.error("There was a problem with the fetch operation:",s)}},[v]);const S=async s=>{s.preventDefault(),f(!0);try{const t=await fetch(`https://81c9-69-197-145-100.ngrok-free.app/group-members/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:r.names,phoneNumber:r.phoneNumber,groupId:r.groupId,orgGroupCode:r.orgGroupCode})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);H(!v)}catch(t){console.error("There was a problem with the fetch operation:",t)}f(!1),u(!p)};return a.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[e.jsx(O,{style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)",marginBottom:"30px",backgroundColor:"rgba(255,255,255,0.7)"},children:e.jsxs(_,{children:[e.jsx(J,{style:{fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs(W,{color:"primary",variant:"solid",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsxs("svg",{style:{marginRight:"8px"},xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"currentColor",class:"bi bi-buildings",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M14.763.075A.5.5 0 0 1 15 .5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .342-.474L6 7.64V4.5a.5.5 0 0 1 .276-.447l8-4a.5.5 0 0 1 .487.022M6 8.694 1 10.36V15h5zM7 15h2v-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5V15h2V1.309l-7 3.5z"}),e.jsx("path",{d:"M2 11h1v1H2zm2 0h1v1H4zm-2 2h1v1H2zm2 0h1v1H4zm4-4h1v1H8zm2 0h1v1h-1zm-2 2h1v1H8zm2 0h1v1h-1zm2-2h1v1h-1zm0 2h1v1h-1zM8 7h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zM8 5h1v1H8zm2 0h1v1h-1zm2 0h1v1h-1zm0-2h1v1h-1z"})]}),"Contact"]}),e.jsxs(c,{variant:"outline",color:"light",onClick:()=>B("/contacts"),children:[e.jsx(C,{icon:X,style:{marginRight:"5px"}}),"Add Group Contact"]})]})}),y&&y?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mb-3",children:e.jsxs(Z,{className:"mb-3",style:{width:"60%",margin:"0 auto"},children:[e.jsx(ee,{id:"basic-addon1",color:"dark",style:{color:"#fff",backgroundColor:"rgb(71, 71, 212)"},children:e.jsx(C,{icon:Y})}),e.jsx(h,{type:"text",id:"searchInput",placeholder:"Search by Contact Name",value:L,onChange:A,style:{borderColor:"rgb(71, 71, 212)"}})]})}),e.jsxs(se,{responsive:!0,small:!0,hover:!0,borderless:!0,stripedColumns:!0,children:[e.jsx(te,{children:e.jsxs(T,{color:"dark",style:{textAlign:"center"},children:[e.jsx(d,{scope:"col",children:"#"}),e.jsx(d,{scope:"col",children:"Names"}),e.jsx(l,{scope:"col",children:"Phone Number"}),e.jsx(l,{scope:"col",children:"Group Id"}),e.jsx(d,{scope:"col",children:"Action"})]})}),z&&z.map((s,t)=>e.jsx(re,{children:e.jsxs(T,{style:{textAlign:"center"},color:t%2?"primary":"",children:[e.jsx(d,{scope:"row",children:N+t+1}),e.jsx(l,{children:s.names}),e.jsx(l,{children:s.phoneNumber}),e.jsx(l,{children:s.groupId}),e.jsx(l,{children:e.jsxs(c,{color:"dark",variant:"outline",onClick:()=>{u(!p),n(s)},style:{display:"flex",alignItems:"center",margin:"2px auto"},children:[e.jsx(C,{icon:ae,style:{marginRight:"5px"}})," Update"]})})]})},s.id))]}),e.jsxs(oe,{"aria-label":"Page navigation example",children:[e.jsx(b,{onClick:()=>g(o-1),disabled:o===1,children:"Previous"}),[...Array(Math.ceil(m.length/i))].map((s,t)=>e.jsx(b,{active:t+1===o,onClick:()=>g(t+1),children:t+1},t+1)),e.jsx(b,{onClick:()=>g(o+1),disabled:o===Math.ceil(m.length/i),children:"Next"})]})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"end",color:"black",width:"100%",marginTop:"30px"},children:[e.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"}),e.jsx("h3",{style:{marginLeft:"20px"},children:"Loading"})]})]})}),e.jsxs(q,{backdrop:"static",visible:p,onClose:()=>u(!1),"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(le,{children:e.jsx(K,{id:"StaticBackdropExampleLabel",children:"Update"})}),e.jsx(Q,{children:e.jsxs(k,{onSubmit:S,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{htmlFor:"exampleFormControlInput1",children:"Names"}),e.jsx(h,{type:"text",id:"exampleFormControlInput1",placeholder:"Group Name",onChange:s=>n({...r,names:s.target.value}),value:r.names})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{htmlFor:"exampleFormControlInput1",children:"Phone Number"}),e.jsx(h,{type:"text",id:"exampleFormControlInput1",placeholder:"Group Name",onChange:s=>n({...r,phoneNumber:s.target.value}),value:r.phoneNumber})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{htmlFor:"exampleFormControlInput1",children:"groupID"}),e.jsx(h,{type:"text",id:"exampleFormControlInput1",placeholder:"Group Name",onChange:s=>n({...r,groupId:s.target.value}),value:r.groupId})]}),e.jsx("div",{className:"col-auto",style:{width:"100%"},children:P?e.jsxs(c,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%"},children:[e.jsx($,{as:"span",size:"sm"})," Updating information ..."]}):e.jsx(c,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%"},children:"UPDATE"})})]})})]})]})}export{ye as default};
