import{e as _,r,j as e}from"./index-C301rl4l.js";import{C as A}from"./index.esm-DfaUp9eW.js";import{C as B,a as L}from"./CCardBody-BB8X-jUM.js";import{C as R,c as $}from"./DefaultLayout-D85aDnQc.js";import{C as H}from"./CAlert-DXt3K87V.js";import{c as g,a as W,b as u,d as z}from"./CRow-DzvM-Fku.js";import{C as q}from"./CFormSelect-CWPKjNEb.js";import{C as G}from"./CForm-DyX8Mp35.js";import{C as D}from"./CFormInput-VSLTUyno.js";import{C as J,a as K,b as S,c as n,d as Q,e as o}from"./CTable-BgNGgvOw.js";import{C as U,a as p}from"./CPaginationItem-CfWfORXZ.js";function le(){const v=_.get("groupId"),[F,T]=r.useState([]),[l,k]=r.useState(),[w,i]=r.useState(!1),[j,N]=r.useState([]),[C,c]=r.useState([]),[a,f]=r.useState(1),d=10,[h,P]=r.useState(""),[m,I]=r.useState(""),b=Math.ceil(C.length/d),E=C.slice((a-1)*d,a*d),x=t=>f(t);r.useEffect(()=>{i(!1);try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/get_code/${l}`).then(t=>t.json()).then(t=>{N(t),c(t),i(!0)}).catch(()=>i(!0))}catch(t){console.error("Error fetching data:",t)}},[l]),r.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/org_group_id/${v}`).then(t=>t.json()).then(t=>T(t)).catch(t=>console.log(t))}catch(t){console.error("Error fetching organisations:",t)}},[]);const M=t=>{if(t.preventDefault(),h&&m){const s=j.filter(O=>{const y=new Date(O.auditDate);return y>=new Date(h)&&y<=new Date(m)});c(s),f(1)}else c(j)};return e.jsx(e.Fragment,{children:e.jsx(B,{style:{marginBottom:"30px",boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(H,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[e.jsx(A,{icon:$,className:"flex-shrink-0 me-2",width:34,height:34}),e.jsx("div",{children:e.jsx("h3",{children:"Sent Messages"})})]})}),e.jsxs("div",{className:" mb-4",style:{maxWidth:"95%",margin:"0 auto"},children:[e.jsx(g,{htmlFor:"selectOrganisation",children:"Select Organisation"}),e.jsxs(q,{id:"selectOrganisation",value:l,onChange:t=>k(t.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[e.jsx("option",{value:"",children:"Select Organisation"}),F.map((t,s)=>e.jsx("option",{value:t.org_Code,children:t.url},s))]})]}),e.jsx(G,{onSubmit:M,style:{maxWidth:"95%",margin:"0 auto"},children:e.jsxs(W,{className:"justify-content-center",children:[e.jsxs(u,{md:5,children:[e.jsx(g,{htmlFor:"fromDate",children:"From"}),e.jsx(D,{type:"date",id:"fromDate",value:h,onChange:t=>P(t.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}})]}),e.jsxs(u,{md:5,children:[e.jsx(g,{htmlFor:"toDate",children:"To"}),e.jsx(D,{type:"date",id:"toDate",value:m,onChange:t=>I(t.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}})]}),e.jsx(u,{className:"d-flex align-items-end",children:e.jsx(z,{color:"primary",type:"submit",className:"mt-4",style:{width:"150px"},children:"Submit"})})]})}),w?e.jsxs(e.Fragment,{children:[e.jsxs(J,{responsive:!0,stripedColumns:!0,borderless:!0,hover:!0,small:!0,style:{marginTop:"40px"},children:[e.jsx(K,{children:e.jsxs(S,{color:"dark",style:{textAlign:"center",backgroundColor:"blue"},children:[e.jsx(n,{children:"Id"}),e.jsx(n,{children:"Destination"}),e.jsx(n,{children:"Message"}),e.jsx(n,{children:"Rate"}),e.jsx(n,{children:"Status"})]})}),E.map((t,s)=>e.jsx(Q,{children:e.jsxs(S,{style:{textAlign:"center"},color:s%2?"primary":"",children:[e.jsx(n,{children:t.id}),e.jsx(o,{children:t.phoneNumber}),e.jsx(o,{children:t.message}),e.jsx(o,{children:t.msgStatus}),e.jsx(o,{children:t.sendStatus})]})},t.id))]}),e.jsxs(U,{align:"center",children:[e.jsx(p,{disabled:a===1,onClick:()=>x(a-1),children:"Previous"}),[...Array(b)].map((t,s)=>e.jsx(p,{active:s+1===a,onClick:()=>x(s+1),children:s+1},s)),e.jsx(p,{disabled:a===b,onClick:()=>x(a+1),children:"Next"})]})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"30px"},children:[e.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"}),e.jsx("h3",{style:{marginLeft:"20px"},children:"Loading"})]})]})})})}export{le as default};
