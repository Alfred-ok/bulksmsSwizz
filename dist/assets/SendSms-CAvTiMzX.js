import{e as f,r as o,j as e}from"./index-C301rl4l.js";import{C as j,c as S}from"./DefaultLayout-D85aDnQc.js";import{C as b}from"./index.esm-DfaUp9eW.js";import{S as m}from"./sweetalert2.esm.all-DOYwHpwi.js";import{a as y,b as w,c as h,d as v}from"./CRow-DzvM-Fku.js";import{C as F,a as T}from"./CCardBody-BB8X-jUM.js";import{C as N}from"./CAlert-DXt3K87V.js";import{C as I}from"./CForm-DyX8Mp35.js";import{C as D}from"./CFormSelect-CWPKjNEb.js";import{C as x}from"./CFormTextarea-hccMW2jx.js";function H(){const C=f.get("groupId"),[p,g]=o.useState([]),[n,l]=o.useState(),[s,c]=o.useState(),[a,i]=o.useState(),u=async r=>{if(r.preventDefault(),n&&s&&a)try{const t=await fetch("https://81c9-69-197-145-100.ngrok-free.app/messagein",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n,phoneNumber:s,message:a,msgStatus:"1",sendStatus:"SEND"})});if(l(""),c(""),i(""),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const d=await t.text();m.fire({title:d,text:"Message Sent",icon:"success"}),console.log(d),console.log(s,a)}catch(t){console.error("There was a problem with the fetch operation:",t),m.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:t})}else m.fire({icon:"error",title:"Please Insert Data",text:"Empty input field"});l(""),c(""),i("")};return o.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/org_group_id/${C}`).then(r=>(console.log(r),r.json())).then(r=>{console.log(r),g(r)}).catch(r=>{console.log(r)})}catch(r){console.error("There was a problem with the fetch operation:",r)}},[]),e.jsx(e.Fragment,{children:e.jsx(y,{className:"justify-content-md-center",children:e.jsx(w,{xs:9,children:e.jsx(F,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:e.jsxs(T,{children:[e.jsx(j,{children:e.jsxs(N,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[e.jsx(b,{icon:S,className:"flex-shrink-0 me-2",width:34,height:34}),e.jsx("div",{children:e.jsx("h3",{children:"Send Sms"})})]})}),e.jsxs(I,{onSubmit:u,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),e.jsxs(D,{id:"exampleFormControlInput1","aria-label":"Default select example",value:n,onChange:r=>l(r.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[e.jsx("option",{value:"",children:"Select Sender Id"})," ",p&&p.map((r,t)=>e.jsx("option",{value:r.org_Code,children:r.url},t))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{htmlFor:"exampleFormControlTextarea1",children:"Contacts (comma separated)"}),e.jsx(x,{id:"exampleFormControlTextarea1",rows:3,value:s,onChange:r=>c(r.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{htmlFor:"exampleFormControlTextarea1",children:"Enter Message"}),e.jsx(x,{id:"exampleFormControlTextarea1",rows:3,value:a,onChange:r=>i(r.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"}}),e.jsxs("p",{children:["Characters: 0/1224 ",e.jsx("span",{style:{color:"grey",margin:"0px 10px"},children:"|"})," Pages: 1/8"]})]}),e.jsx("div",{className:"col-auto",children:e.jsx(v,{color:"primary",type:"submit",className:"mb-3",children:"SUBMIT"})})]})]})})})})})}export{H as default};
