import{e as y,r as s,A as c,n as f,j as r}from"./index-C301rl4l.js";import{C as I}from"./index.esm-DfaUp9eW.js";import{a as S,b as v,c as t,d as F}from"./CRow-DzvM-Fku.js";import{C as N,a as U}from"./CCardBody-BB8X-jUM.js";import{C as B,j as D}from"./DefaultLayout-D85aDnQc.js";import{C as _}from"./CAlert-DXt3K87V.js";import{C as w}from"./CForm-DyX8Mp35.js";import{C as K}from"./CFormSelect-CWPKjNEb.js";import{C as l}from"./CFormInput-VSLTUyno.js";function M(){const m=y.get("groupId"),[a,p]=s.useState([]),[o,h]=s.useState(),[n,u]=s.useState(),[i,x]=s.useState(),{purchaseSmsUnit:O,setPurchaseSmsUnit:d}=s.useContext(c),{OrganisationDataID:k,setOrganisationDataID:C}=s.useContext(c),g=f();s.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/org_group_id/${m}`).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),p(e)}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[]),s.useEffect(()=>{try{fetch(`https://81c9-69-197-145-100.ngrok-free.app/get_organisation/${n}`).then(e=>e.json()).then(e=>{console.log(e),h({balance:e.balance,smsCost:e.smsCost,sms_Units:e.sms_Units,accessKey:e.accessKey,apiKey:e.apiKey,clientId:e.clientId,groupID:e.groupID,mbcode:e.mbcode,org_Code:e.org_Code,org_Name:e.org_Name,token:e.token,url:e.url})}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[n]);const j=e=>{e.preventDefault(),d({price:o.smsCost,quantity:i}),g("/price")};return C(n),r.jsx(r.Fragment,{children:r.jsx(S,{children:r.jsx(v,{xs:9,style:{margin:"0px auto"},children:r.jsx(N,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:r.jsxs(U,{children:[r.jsx(B,{children:r.jsxs(_,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[r.jsx(I,{icon:D,className:"flex-shrink-0 me-2",width:34,height:34}),r.jsx("div",{children:r.jsx("h3",{children:"Buy Sms"})})]})}),r.jsxs(w,{onSubmit:j,children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),r.jsxs(K,{id:"exampleFormControlInput1","aria-label":"Default select example",value:n,onChange:e=>u(e.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[r.jsx("option",{value:"",children:"Select Sender Id"})," ",a&&a.map((e,b)=>r.jsx("option",{value:e.id,children:e.url},b))]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Sms Balance"}),r.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:o&&o.balance})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Sms Units Balance"}),r.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Units Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:o&&o.sms_Units})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Price in Ksh"}),r.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Price in Ksh",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:o&&o.smsCost})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Purchase Sms Units"}),r.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Purchase Sms Units",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:i,onChange:e=>x(e.target.value),required:!0})]}),r.jsx("div",{className:"col-auto",children:r.jsx(F,{color:"primary",type:"submit",className:"mb-3",children:"SUBMIT"})})]})]})})})})})}export{M as default};
